{"version":3,"sources":["../tags-input.js"],"names":["prototype","Object","create","HTMLElement","addTag","value","isDuplicate","allowDuplicates","push","tagList","appendChild","createTag","triggerEvent","log","handleDuplicate","attachedCallback","attributeChangedCallback","attribute","oldValue","newValue","prop","updateAttribute","blurOption","option","classList","remove","blurTag","tag","clearInput","input","clearOptions","optionList","innerHTML","clearSelectedTag","selectedTag","querySelector","createdCallback","initializeStickit","identifier","getAttribute","allowMultiple","allowNew","debug","document","createElement","startingValue","split","forEach","bind","add","hideOptions","createShadowRoot","shadowRoot","createStylesheet","createInput","setAttribute","addEventListener","handleKeybinds","handleInput","showOptions","removeAttribute","createOption","optionElement","id","focusOption","createRemoveButton","removeButton","removeTag","stylesheet","createTextWrapper","textWrapper","detachedCallback","findOption","queryString","selectedOption","focusTag","getElementValue","element","hasAttribute","handleInvalid","handleDelete","shouldCaptureKeybind","event","preventDefault","previousTag","previousElementSibling","handleDownArrow","nextOption","nextElementSibling","search","handleLeftArrow","which","handleReturn","handleRightArrow","handleUpArrow","handleOptionClick","target","focus","firstOption","nextTag","previousOption","window","Backbone","Stickit","addHandler","events","getVal","$el","options","val","onGet","Array","isArray","selector","ret","indexOf","matchValue","type","keys","console","arguments","shift","call","apply","i","length","index","splice","removeEventListener","query","selectionStart","selectionEnd","detail","dispatchEvent","CustomEvent","property","test","toLowerCase","updateOptions","merge","registerElement"],"mappings":"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","file":"tags-input.js","sourcesContent":["(function () {\n\n  /******************************************************************************\\\n    prototype\n  \\******************************************************************************/\n\n  let prototype = Object.create(HTMLElement.prototype)\n\n\n\n\n\n  /******************************************************************************\\\n    addTag\n  \\******************************************************************************/\n\n  prototype.addTag = function addTag (value) {\n    let isDuplicate = this.isDuplicate(value)\n\n    if (this.allowDuplicates || !isDuplicate) {\n      this.value.push(value)\n      this.tagList.appendChild(this.createTag(value))\n\n      this.triggerEvent('add', value)\n\n      this.log('groupCollapsed', 'adding tag')\n      this.log('added tag:', value)\n      this.log('groupEnd')\n\n      return true\n    }\n\n    this.handleDuplicate()\n    return false\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    attachedCallback\n  \\******************************************************************************/\n\n  prototype.attachedCallback = function attachedCallback () {\n    this.log('tags-input attached!', this)\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    attributeChangedCallback\n  \\******************************************************************************/\n\n  prototype.attributeChangedCallback = function attributeChangedCallback (attribute, oldValue, newValue) {\n    let prop = null\n\n    this.log('groupCollapsed', 'attribute changed')\n    this.log('attribute:', attribute)\n\n    switch (attribute) {\n      case 'data-duplicates':\n        prop = 'allowDuplicates'\n        break\n      case 'data-multiple':\n        prop = 'allowMultiple'\n        break\n      case 'data-new':\n        prop = 'allowNew'\n        break\n      case 'data-debug':\n        prop = 'debug'\n        break\n    }\n\n    if (prop) {\n      this.updateAttribute(attribute, prop)\n      this.log('prop:', prop)\n    }\n\n    this.log('old value:', oldValue)\n    this.log('new value:', newValue)\n    this.log('groupEnd')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    blurOption\n  \\******************************************************************************/\n\n  prototype.blurOption = function blurOption (option) {\n    option.classList.remove('focus')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    blurTag\n  \\******************************************************************************/\n\n  prototype.blurTag = function blurTag (tag) {\n    tag.classList.remove('focus')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    clearInput\n  \\******************************************************************************/\n\n  prototype.clearInput = function clearInput () {\n    this.input.value = ''\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    clearOptions\n  \\******************************************************************************/\n\n  prototype.clearOptions = function clearOptions () {\n    this.optionList.innerHTML = ''\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    clearSelectedTag\n  \\******************************************************************************/\n\n  prototype.clearSelectedTag = function clearSelectedTag () {\n    let selectedTag = this.tagList.querySelector('.focus')\n\n    if (selectedTag) {\n      this.blurTag(selectedTag)\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createdCallback\n  \\******************************************************************************/\n\n  prototype.createdCallback = function createdCallback () {\n    // Add bindings for Backbone.Stickit\n    this.initializeStickit()\n\n    this.updateAttribute('data-duplicates', 'allowDuplicates')\n    this.updateAttribute('data-multiple', 'allowMultiple')\n    this.updateAttribute('data-new', 'allowNew')\n    this.updateAttribute('data-debug', 'debug')\n    this.identifier = this.getAttribute('id') || this.getAttribute('name')\n\n    this.log('groupCollapsed', 'tags-input')\n    this.log('Allow Duplicates:', this.allowDuplicates)\n    this.log('Allow Multiple:', this.allowMultiple)\n    this.log('Allow New:', this.allowNew)\n    this.log('Debug:', this.debug)\n    this.log('groupEnd')\n\n    this.value = []\n\n    this.optionList = document.createElement('ol')\n    this.tagList = document.createElement('ul')\n\n    let startingValue = this.getAttribute('value')\n    if (startingValue) {\n      startingValue.split(',').forEach(this.addTag.bind(this))\n    }\n\n    this.optionList.classList.add('options')\n    this.tagList.classList.add('tags')\n\n    this.hideOptions()\n\n    this.createShadowRoot()\n    this.shadowRoot.appendChild(this.createStylesheet())\n    this.shadowRoot.appendChild(this.tagList)\n    this.shadowRoot.appendChild(this.createInput())\n    this.shadowRoot.appendChild(this.optionList)\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createInput\n  \\******************************************************************************/\n\n  prototype.createInput = function createInput () {\n    this.input = document.createElement('input')\n\n    this.input.setAttribute('type', 'search')\n    this.input.addEventListener('keydown', this.handleKeybinds.bind(this))\n    this.input.addEventListener('input', this.handleInput.bind(this))\n    this.input.addEventListener('focus', () => {\n      this.setAttribute('data-focus', '')\n      this.showOptions()\n    })\n    this.input.addEventListener('blur', () => {\n      this.removeAttribute('data-focus')\n      this.hideOptions()\n    })\n\n    return this.input\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createOption\n  \\******************************************************************************/\n\n  prototype.createOption = function createOption (option) {\n    let optionElement = document.createElement('li')\n\n    if (typeof option === 'string') {\n      optionElement.innerHTML = option\n      optionElement.setAttribute('data-value', option)\n\n    } else {\n      optionElement.innerHTML = option.value\n      optionElement.setAttribute('data-value', option.value)\n\n      if (option.id) {\n        optionElement.setAttribute('data-id', option.id)\n      }\n    }\n\n    optionElement.addEventListener('mouseover', this.focusOption.bind(this, optionElement))\n    optionElement.addEventListener('mouseout', this.blurOption.bind(this, optionElement))\n\n    return optionElement\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createRemoveButton\n  \\******************************************************************************/\n\n  prototype.createRemoveButton = function createRemoveButton (tag) {\n    let removeButton = document.createElement('button')\n\n    removeButton.innerHTML = '&times;'\n\n    removeButton.addEventListener('mousedown', this.removeTag.bind(this, tag))\n\n    return removeButton\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createStylesheet\n  \\******************************************************************************/\n\n  prototype.createStylesheet = function createStylesheet () {\n    let stylesheet = document.createElement('style')\n\n    stylesheet.innerHTML =\n      ':host {' +\n        'align-content: stretch;' +\n        'align-items: center;' +\n        'background-color: white;' +\n        'border: 1px solid black;' +\n        'display: flex;' +\n        'flex-wrap: wrap;' +\n        'position: relative;' +\n      '}' +\n\n  //    ':host * {' +\n  //      'box-sizing: border-box;'\n  //    '}' +\n\n      ':host input {' +\n        'border: none;' +\n        'flex-grow: 1;' +\n        'flex-shrink: 0;' +\n        'min-width: 20%;' +\n        'outline: none;' +\n        'padding: 1rem 1.5rem;' +\n      '}' +\n\n      ':host button {' +\n        'background: none;' +\n        'background-color: rgba(0, 0, 0, 0);' +\n        'border: none;' +\n        'border-radius: 0;' +\n        'flex-grow: 1;' +\n        'margin: 0;' +\n        'margin-left: 0.5rem;' +\n        'padding: 0 0.5rem;' +\n      '}' +\n\n      ':host button:hover {' +\n        'background-color: rgba(0, 0, 0, 0.3);' +\n      '}' +\n\n      ':host .options,' +\n      ':host .tags {' +\n        'list-style: none;' +\n        'margin: 0;' +\n        'padding: 0;' +\n      '}' +\n\n      ':host .options {' +\n        'background-color: white;' +\n        'border: 1px solid black;' +\n        'left: 0;' +\n        'position: absolute;' +\n        'right: 0;' +\n        'top: 100%;' +\n        'width: 100%;' +\n        'z-index: 1;' +\n      '}' +\n\n      ':host .options:empty {' +\n        'display: none;' +\n      '}' +\n\n      ':host .options li {' +\n        'padding: 1rem;' +\n      '}' +\n\n      ':host .options .focus {' +\n        'background-color: lightgrey;' +\n      '}' +\n\n      ':host .tags {' +\n        'align-items: center;' +\n        'display: flex;' +\n        'flex-wrap: wrap;' +\n        'flex-shrink: 0;' +\n        'max-width: 100%;' +\n      '}' +\n\n      ':host .tags li {' +\n        'background-color: lightgrey;' +\n        'margin: 0.5rem;' +\n        'padding: 0 0 0 0.5rem;' +\n      '}' +\n\n      ':host .tags .focus {' +\n        'background-color: blue;' +\n        'color: white;' +\n      '}' +\n\n      ':host .hide {' +\n        'display: none;' +\n      '}'\n\n    return stylesheet\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createTag\n  \\******************************************************************************/\n\n  prototype.createTag = function createTag (value) {\n    let tag = document.createElement('li')\n\n    if (typeof value === 'string') {\n      tag.setAttribute('data-value', value)\n    } else {\n      tag.setAttribute('data-value', value.value)\n\n      if (value.id) {\n        tag.setAttribute('data-id', value.id)\n      }\n    }\n\n    tag.appendChild(this.createTextWrapper(value))\n    tag.appendChild(this.createRemoveButton(tag))\n\n    return tag\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    createTextWrapper\n  \\******************************************************************************/\n\n  prototype.createTextWrapper = function createTextWrapper (value) {\n    let textWrapper = document.createElement('span')\n\n    if (typeof value === 'string') {\n      textWrapper.innerHTML = value\n    } else {\n      textWrapper.innerHTML = value.value\n    }\n\n    return textWrapper\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    detachedCallback\n  \\******************************************************************************/\n\n  prototype.detachedCallback = function detachedCallback () {\n    this.log('tags-input detached!', this)\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    findOption\n  \\******************************************************************************/\n\n  prototype.findOption = function findOption (option) {\n    let queryString\n\n    if (typeof option === 'string') {\n      queryString = `[data-value=${option}]`\n    } else {\n      if (option.id) {\n        queryString = `[data-id='${option.id}']`\n      } else {\n        queryString = `[data-value='${option.value}']`\n      }\n    }\n\n    return this.optionList.querySelector(queryString)\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    focusOption\n  \\******************************************************************************/\n\n  prototype.focusOption = function focusOption (option) {\n    let selectedOption = this.optionList.querySelector('.focus')\n    let selectedTag = this.tagList.querySelector('.focus')\n\n    if (selectedOption) {\n      this.blurOption(selectedOption)\n    }\n\n    if (selectedTag) {\n      this.blurTag(selectedTag)\n    }\n\n    option.classList.add('focus')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    focusTag\n  \\******************************************************************************/\n\n  prototype.focusTag = function focusTag (tag) {\n    let selectedTag = this.tagList.querySelector('.focus')\n\n    if (selectedTag) {\n      this.blurTag(selectedTag)\n    }\n\n    tag.classList.add('focus')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    getElementValue\n  \\******************************************************************************/\n\n  prototype.getElementValue = function getElementValue (element) {\n    if (element.hasAttribute('data-id')) {\n      return {\n        id: element.getAttribute('data-id'),\n        value: element.getAttribute('data-value')\n      }\n    } else {\n      return element.getAttribute('data-value')\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleDuplicate\n  \\******************************************************************************/\n\n  prototype.handleDuplicate = function handleDuplicate () {\n    this.triggerEvent('error', 'duplicate')\n    this.log('warn', 'duplicate tag')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleInvalid\n  \\******************************************************************************/\n\n  prototype.handleInvalid = function handleInvalid () {\n    this.triggerEvent('error', 'invalid')\n    this.log('warn', 'invalid tag')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleDelete\n  \\******************************************************************************/\n\n  prototype.handleDelete = function handleDelete () {\n    if (this.shouldCaptureKeybind()) {\n      event.preventDefault()\n\n      let selectedTag = this.tagList.querySelector('.focus')\n\n      if (selectedTag) {\n        let previousTag = selectedTag.previousElementSibling\n\n        if (previousTag) {\n          this.focusTag(previousTag)\n        }\n\n        this.removeTag(selectedTag)\n\n      } else if (selectedTag = this.tagList.querySelector('li:last-of-type')) {\n        this.focusTag(selectedTag)\n      }\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleDownArrow\n  \\******************************************************************************/\n\n  prototype.handleDownArrow = function handleDownArrow () {\n    event.preventDefault()\n\n    let selectedOption = this.optionList.querySelector('.focus')\n\n    if (selectedOption) {\n      let nextOption = selectedOption.nextElementSibling\n\n      if (nextOption) {\n        this.blurOption(selectedOption)\n        this.focusOption(nextOption)\n      }\n    } else {\n      selectedOption = this.optionList.querySelector('li:first-of-type')\n\n      if (selectedOption) {\n        this.focusOption(selectedOption)\n      }\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleInput\n  \\******************************************************************************/\n\n  prototype.handleInput = function handleInput () {\n    this.clearSelectedTag()\n\n    this.search(this.input.value)\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleLeftArrow\n  \\******************************************************************************/\n\n  prototype.handleLeftArrow = function handleLeftArrow () {\n    if (this.shouldCaptureKeybind()) {\n      event.preventDefault()\n\n      let selectedTag = this.tagList.querySelector('.focus')\n\n      if (selectedTag) {\n        let previousTag = selectedTag.previousElementSibling\n\n        if (previousTag) {\n          this.clearSelectedTag()\n          this.focusTag(previousTag)\n        }\n      } else {\n        selectedTag = this.tagList.querySelector('li:last-of-type')\n\n        if (selectedTag) {\n          this.focusTag(selectedTag)\n        }\n      }\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleKeybinds\n  \\******************************************************************************/\n\n  prototype.handleKeybinds = function handleKeybinds (event) {\n    switch (event.which) {\n      case 9: // tab\n      case 13: // enter\n      case 188: // comma\n        this.handleReturn(event)\n        break\n\n      case 8: // backspace\n      case 46: // delete\n        this.handleDelete()\n        break\n\n      case 37: // left arrow\n        this.handleLeftArrow()\n        break\n\n      case 39: // right arrow\n        this.handleRightArrow()\n        break\n\n      case 38: // up arrow\n        this.handleUpArrow()\n        break\n\n      case 40: // down arrow\n        this.handleDownArrow()\n        break\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleOptionClick\n  \\******************************************************************************/\n\n  prototype.handleOptionClick = function handleOptionClick (event) {\n    event.preventDefault()\n\n    let target = event.target\n    let value = this.getElementValue(target)\n\n    if (this.addTag(value)) {\n      this.clearInput()\n      this.clearOptions()\n    }\n\n    this.input.focus()\n\n    this.log('groupCollapsed', 'handleOptionClick')\n    this.log('value', value)\n    this.log('target', target)\n    this.log(this.input)\n    this.log('groupEnd')\n  }\n\n\n\n\n  /******************************************************************************\\\n    handleReturn\n  \\******************************************************************************/\n\n  prototype.handleReturn = function handleReturn (event) {\n    let firstOption = this.optionList.querySelector('li:first-of-type')\n    let selectedOption = this.optionList.querySelector('.focus')\n    let value\n\n    if (!this.input.value) {\n      return\n    }\n\n    if (this.allowNew) {\n      value = this.input.value\n    } else if (firstOption) {\n      value = this.getElementValue(firstOption)\n    }\n\n    if (selectedOption) {\n      value = this.getElementValue(selectedOption)\n    }\n\n    if (!this.allowNew && !firstOption) {\n      this.handleInvalid()\n      return\n    }\n\n    if (value) {\n      event.preventDefault()\n\n      this.addTag(value)\n\n      this.clearInput()\n      this.clearOptions()\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleRightArrow\n  \\******************************************************************************/\n\n  prototype.handleRightArrow = function handleRightArrow () {\n    if (this.shouldCaptureKeybind()) {\n      event.preventDefault()\n\n      let selectedTag = this.tagList.querySelector('.focus')\n\n      if (selectedTag) {\n        let nextTag = selectedTag.nextElementSibling\n\n        if (nextTag) {\n          this.focusTag(nextTag)\n        }\n\n        this.clearSelectedTag()\n      }\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    handleUpArrow\n  \\******************************************************************************/\n\n  prototype.handleUpArrow = function handleUpArrow () {\n    event.preventDefault()\n\n    let selectedOption = this.optionList.querySelector('.focus')\n\n    if (selectedOption) {\n      let previousOption = selectedOption.previousElementSibling\n\n      if (previousOption) {\n        this.focusOption(previousOption)\n      }\n\n      this.blurOption(selectedOption)\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    hideOptions\n  \\******************************************************************************/\n\n  prototype.hideOptions = function hideOptions () {\n    this.optionList.classList.add('hide')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    initializeStickit\n  \\******************************************************************************/\n\n  prototype.initializeStickit = function initializeStickit () {\n    if (window.Backbone && window.Backbone.Stickit) {\n      Backbone.Stickit.addHandler({\n        events: ['blur'],\n        getVal: function ($el, event, options) {\n          return $el.val()\n        },\n        onGet: (value, options) => {\n          if (value) {\n            if (Array.isArray(value)) {\n              value.forEach(this.addTag)\n\n            } else if (typeof value === 'string') {\n              value.split(',').forEach(this.addTag.bind(this))\n            }\n          }\n\n          return value\n        },\n        selector: 'tags-input'\n      })\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    isDuplicate\n  \\******************************************************************************/\n\n  prototype.isDuplicate = function isDuplicate (value) {\n    let ret\n\n    if (typeof value === 'string') {\n      ret = this.value.indexOf(value) !== -1\n    } else {\n      ret = this.matchValue(value) !== -1\n    }\n\n    return ret\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    log\n  \\******************************************************************************/\n\n  prototype.log = function log () {\n    // Default to using console.log\n    let type = 'log'\n\n    // Check to see if the first argument passed is a console function. If so,\n    // remove it from the arguments and use it instead of log\n    if (Object.keys(console).indexOf(arguments[0]) !== -1) {\n      type = [].shift.call(arguments)\n    }\n\n    if (this.debug) {\n      console[type].apply(this, arguments)\n    }\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    matchValue\n  \\******************************************************************************/\n\n  prototype.matchValue = function matchValue (value) {\n    for (let i = 0, length = this.value.length; i < length; i++) {\n      if (this.value[i].id && value.id) {\n        if (this.value[i].id === value.id) {\n          return i\n        }\n      } else if (this.value[i].value === value.value) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    removeTag\n  \\******************************************************************************/\n\n  prototype.removeTag = function removeTag (tag) {\n    let value = this.getElementValue(tag)\n    let index\n\n    if (typeof value === 'string') {\n      index = this.value.indexOf(value)\n    } else {\n      this.matchValue(value)\n    }\n\n    this.value.splice(index, 1)\n\n    tag.querySelector('button').removeEventListener('mousedown', this.removeTag)\n    tag.remove()\n\n    this.triggerEvent('remove', value)\n\n    this.log('groupCollapsed', 'removing tag')\n    this.log('value:', value)\n    this.log('groupEnd')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    search\n  \\******************************************************************************/\n\n  prototype.search = function search (query) {\n    if (query) {\n      this.triggerEvent('search', query)\n    }\n\n    this.log('groupCollapsed', 'search')\n    this.log(query ? ('query:' + query) : 'no query')\n    this.log('groupEnd')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    shouldCaptureKeybind\n  \\******************************************************************************/\n\n  prototype.shouldCaptureKeybind = function shouldCaptureKeybind () {\n    let input = this.input\n\n    if (!input.selectionStart && !input.selectionEnd) {\n      return true\n    }\n\n    return false\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    showOptions\n  \\******************************************************************************/\n\n  prototype.showOptions = function showOptions () {\n    this.optionList.classList.remove('hide')\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    triggerEvent\n  \\******************************************************************************/\n\n  prototype.triggerEvent = function triggerEvent (type, detail) {\n    this.dispatchEvent(new CustomEvent(type, {\n      detail: detail\n    }))\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    updateAttribute\n  \\******************************************************************************/\n\n  prototype.updateAttribute = function updateAttribute (attribute, property) {\n    let hasAttribute = this.hasAttribute(attribute)\n    let value = this.getAttribute(attribute)\n\n    // If the attribute doesn't exist, we'll just return false\n    if (!hasAttribute) {\n      value = false\n\n    // getAttribute returns an empty string for boolean attributes\n    } else if (typeof value === 'string' && value === '') {\n      value = true\n    }\n\n    if (typeof value === 'string' && /(true|false)/gi.test(value)) {\n      value = value.toLowerCase() === 'true'\n    }\n\n    this[property] = value\n  }\n\n\n\n\n\n  /******************************************************************************\\\n    updateOptions\n  \\******************************************************************************/\n\n  prototype.updateOptions = function updateOptions (options, merge) {\n    if (!merge) {\n      this.clearOptions()\n    }\n\n    options.forEach(option => {\n      if (merge && this.findOption(option)) {\n        return\n      }\n\n      let optionElement = this.createOption(option)\n\n      optionElement.addEventListener('mousedown', this.handleOptionClick.bind(this))\n\n      this.optionList.appendChild(optionElement)\n    })\n\n    this.log('groupCollapsed', 'updating options')\n    this.log('options:', options)\n    this.log('groupEnd')\n  }\n\n\n\n\n\n  document.registerElement('tags-input', {\n    prototype: prototype\n  })\n})()\n"]}